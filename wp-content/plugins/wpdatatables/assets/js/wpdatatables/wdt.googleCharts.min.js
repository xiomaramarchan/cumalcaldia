google.charts.load("current",{packages:["corechart","bar","gauge","scatter"]});var wpDataTablesGoogleChart=function(){var t={rows:[],columns:[],type:"column",containerId:"google-chart-container",columnIndexes:[],connectedWPDataTable:null,chart:null,googleDataTable:null,renderCallback:null,options:{animation:{duration:1e3,easing:"out",startup:!0},backgroundColor:{fill:"#FFFFFF",strokeWidth:0,stroke:"#666",rx:0},chartArea:{backgroundColor:{}},crosshair:{},curveType:"none",fontName:"Arial",fontSize:null,height:400,legend:{position:"right"},orientation:"horizontal",titlePosition:"out",tooltip:{trigger:"focus"},vAxis:{direction:1,viewWindow:{}}},setRows:function(t){this.rows=t},enableDateTimeAxis:function(){this.options.hAxis.gridlines={count:-1,units:{days:{format:["MMM dd"]},hours:{format:["HH:mm","ha"]}}}},detectDates:function(){for(var t in this.columns)if("date"==this.columns[t].type||"datetime"==this.columns[t].type)for(var i in this.rows){var o=Date.parse(this.rows[i][t]);if(isNaN(o))this.rows[i][t]=new Date;else if(this.rows[i][t]=new Date(o),null==this.connectedWPDataTable){var e=this.rows[i][t].getTime();"datetime"==this.columns[t].type&&(e+=60*this.rows[i][t].getTimezoneOffset()*1e3),this.rows[i][t].setTime(e)}else this.rows[i][t].setTime(this.rows[i][t].getTime());"datetime"==this.columns[t].type&&this.enableDateTimeAxis()}},setColumns:function(t){this.columns=t},getColumns:function(){return this.columns},setOptions:function(i){for(var o in i)"responsive_width"!=o||"1"!=i[o]?this.options[o]=i[o]:(t.options.animation=!1,jQuery(window).resize((function(){t.chart.draw(t.googleDataTable,t.options)})))},getOptions:function(){return this.options},setType:function(t){this.type=t},getType:function(){return this.type},setGrouping:function(t){this.group_chart=t},setContainer:function(t){this.containerId=t},getContainer:function(){return this.containerId},setRenderCallback:function(t){this.renderCallback=t},render:function(){if(void 0!==google.visualization&&void 0!==google.visualization.DataTable){for(var t in this.googleDataTable=new google.visualization.DataTable,this.columns)isNaN(t)||this.googleDataTable.addColumn(this.columns[t]);switch(this.detectDates(),this.googleDataTable.addRows(this.rows),this.type){case"google_column_chart":this.chart=new google.visualization.ColumnChart(document.getElementById(this.containerId));break;case"google_histogram":this.chart=new google.visualization.Histogram(document.getElementById(this.containerId));break;case"google_bar_chart":this.options.orientation="vertical",this.chart=new google.visualization.BarChart(document.getElementById(this.containerId));break;case"google_stacked_bar_chart":this.options.orientation="vertical",this.options.isStacked=!0,this.chart=new google.visualization.BarChart(document.getElementById(this.containerId));break;case"google_area_chart":this.chart=new google.visualization.AreaChart(document.getElementById(this.containerId));break;case"google_stepped_area_chart":this.options.isStacked=!0,this.chart=new google.visualization.SteppedAreaChart(document.getElementById(this.containerId));break;case"google_line_chart":this.chart=new google.visualization.LineChart(document.getElementById(this.containerId));break;case"google_pie_chart":this.chart=new google.visualization.PieChart(document.getElementById(this.containerId));break;case"google_bubble_chart":this.chart=new google.visualization.BubbleChart(document.getElementById(this.containerId));break;case"google_donut_chart":this.options.pieHole=.4,this.chart=new google.visualization.PieChart(document.getElementById(this.containerId));break;case"google_gauge_chart":this.options.redFrom=90,this.options.redTo=100,this.options.yellowFrom=75,this.options.yellowTo=90,this.options.minorTicks=5,this.chart=new google.visualization.Gauge(document.getElementById(this.containerId));break;case"google_scatter_chart":this.chart=new google.visualization.ScatterChart(document.getElementById(this.containerId));break;case"google_candlestick_chart":this.options.legend="none",this.chart=new google.visualization.CandlestickChart(document.getElementById(this.containerId));break;case"google_waterfall_chart":this.options.legend="none",this.options.bar={groupWidth:"100%"},this.options.candlestick={fallingColor:{strokeWidth:0,fill:"#a52714"},risingColor:{strokeWidth:0,fill:"#0f9d58"}},this.chart=new google.visualization.CandlestickChart(document.getElementById(this.containerId))}null!==this.renderCallback&&this.renderCallback(this),this.chart.draw(this.googleDataTable,this.options)}},refresh:function(){if(void 0!==google.visualization&&void 0!==google.visualization.DataTable&&null!=this.chart){for(var t in this.googleDataTable=new google.visualization.DataTable,this.columns)isNaN(t)||this.googleDataTable.addColumn(this.columns[t]);this.detectDates(),this.googleDataTable.addRows(this.rows),null!==this.renderCallback&&this.renderCallback(this),this.chart.draw(this.googleDataTable,this.options)}},setChartConfig:function(i){1==i.responsive_width?(this.options.animation=!1,delete this.options.width,jQuery(window).resize((function(){t.chart.draw(t.googleDataTable,t.options)}))):this.options.width=i.width,i.height&&(this.options.height=i.height),this.options.backgroundColor.fill=i.background_color,i.border_width&&(this.options.backgroundColor.strokeWidth=i.border_width),this.options.backgroundColor.stroke=i.border_color,i.border_radius&&(this.options.backgroundColor.rx=i.border_radius),i.border_radius&&(this.options.backgroundColor.rx=i.border_radius),this.options.chartArea.backgroundColor.fill=i.plot_background_color,i.plot_border_width&&(this.options.chartArea.backgroundColor.strokeWidth=i.plot_border_width),this.options.chartArea.backgroundColor.stroke=i.plot_border_color,i.font_size&&(this.options.fontSize=i.font_size),i.font_name&&(this.options.fontName=i.font_name),"google_pie_chart"==i.chart_type&&(1==i.three_d?this.options.is3D=!0:this.options.is3D=!1);var o=0;for(var e in i.series_data)this.columns[o+1].label=i.series_data[e].label,""!=i.series_data[e].color&&(this.options.series[o]={color:i.series_data[e].color}),o++;0==i.show_grid?(this.options.hAxis.gridlines={color:"transparent"},this.options.vAxis.gridlines={color:"transparent"}):(delete this.options.hAxis.gridlines,delete this.options.vAxis.gridlines),i.horizontal_axis_label&&(this.options.hAxis.title=i.horizontal_axis_label),1==i.horizontal_axis_crosshair&&0==i.vertical_axis_crosshair?this.options.crosshair={trigger:"both",orientation:"horizontal"}:0==i.horizontal_axis_crosshair&&1==i.vertical_axis_crosshair?this.options.crosshair={trigger:"both",orientation:"vertical"}:1==i.horizontal_axis_crosshair&&1==i.vertical_axis_crosshair?this.options.crosshair={trigger:"both",orientation:"both"}:this.options.crosshair={},i.horizontal_axis_direction&&(this.options.hAxis.direction=i.horizontal_axis_direction),i.vertical_axis_label&&(this.options.vAxis.title=i.vertical_axis_label),i.vertical_axis_direction&&(this.options.vAxis.direction=i.vertical_axis_direction),this.options.vAxis.viewWindow.min=i.vertical_axis_min,this.options.vAxis.viewWindow.max=i.vertical_axis_max,1==i.inverted?this.options.orientation="vertical":this.options.orientation="horizontal",1==i.show_title?this.options.title=i.chart_title:this.options.title="",1==i.title_floating?this.options.titlePosition="in":this.options.titlePosition="out",1==i.tooltip_enabled?this.options.tooltip.trigger="focus":this.options.tooltip.trigger="none",i.legend_position&&(this.options.legend.position=i.legend_position),"bottom"==i.legend_vertical_align?this.options.legend.alignment="end":"middle"==i.legend_vertical_align?this.options.legend.alignment="center":this.options.legend.alignment="start"},setColumnIndexes:function(t){this.columnIndexes=t},getColumnIndexes:function(){return this.columnIndexes}};return t};